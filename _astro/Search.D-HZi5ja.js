import{o as t,i as e,s as a,r}from"./props.BUlVg9lA.js";import{q as s,v as i,f as n,t as o,g as l,e as c,a as d,p,b as m,s as v,c as f,d as h,u as g,h as u,m as b,i as x,r as w,j as y}from"./utils.CJQZrHOt.js";import{s as k}from"./render.BA07FGsC.js";import{i as j}from"./if.D60netQB.js";import{e as I,i as L}from"./each.BwLlVelT.js";import{I as z,h as E}from"./Icon.DOYbOx9c.js";import{b as B}from"./input.62DHl0HI.js";import{I as S}from"./zh_TW.CljpqaUS.js";import{i as T}from"./translation.B4-sNpGr.js";import"./navBarConfig.BmtWP5W4.js";import{u as W,a as _}from"./url-utils.CSd8bj7p.js";/* empty css                        */import"./branches.QMhmkc9g.js";function C(t,e){window.location.href=t}var P=u('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),D=u('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),R=u('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; flex-shrink: 0;"> </span> <div><!></div></div>'),V=u('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block\n           rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"><!> <!></div> <!> <!></a>'),q=u('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)] text-[var(--primary)] font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),A=u("<!> <!>",1),F=u('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),G=u('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),H=u('<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg\n      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0\n         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]\ntop-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl\n      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0\n               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>',1);function M(u,M){m(M,!1);let N,U=b(""),$=b(""),J=b([]),K=b(!1),O=b(!1);W("/"),W("/");const Q=(t,e)=>{const a=document.getElementById("search-panel");!a||e&&!l(U)||!e&&!l($)||(t?a.classList.remove("float-panel-closed"):a.classList.add("float-panel-closed"))},X=(t,e)=>{t.preventDefault(),document.getElementById("search-panel")?.classList.add("float-panel-closed"),v(U,""),v($,""),v(J,[]),function(t,e){if(t&&"string"==typeof t)if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//"))window.open(t,"_blank");else{if(t.startsWith("#")){const e=document.getElementById(t.slice(1));return void(e&&e.scrollIntoView({behavior:"smooth"}))}if("undefined"!=typeof window&&window.swup)try{e?.replace||window.swup.navigate(t)}catch(a){console.error("Swup navigation failed:",a),C(t)}else C(t)}else console.warn("navigateToPage: Invalid URL provided")}(e)},Y=async(t,e)=>{if(!t)return Q(!1,e),void v(J,[]);l(O)&&(v(K,!0),clearTimeout(N),N=setTimeout(async()=>{try{let a=[];if(window.pagefind){const e=await window.pagefind.search(t);a=await Promise.all(e.results.map(t=>t.data()))}else 0;v(J,a),Q(!0,e)}catch(a){console.error("Search error:",a),v(J,[]),Q(!1,e)}finally{v(K,!1)}},300))};t(()=>{const t=()=>{v(O,!0),l(U)&&Y(l(U),!0),l($)&&Y(l($),!1)};window.pagefind?t():(document.addEventListener("pagefindready",t,{once:!0}),document.addEventListener("pagefindloaderror",t,{once:!0}))}),s(()=>(l(O),l(U)),()=>{l(O)&&(l(U)||""===l(U))&&Y(l(U),!0)}),s(()=>(l(O),l($)),()=>{l(O)&&(l($)||""===l($))&&Y(l($),!1)}),i(),e();var Z=H(),tt=n(Z),et=x(tt);z(et,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var at=f(et,2);r(at),w(tt);var rt=f(tt,2),st=x(rt);z(st,{icon:"material-symbols:search",class:"text-[1.25rem]"}),w(rt);var it=f(rt,2),nt=x(it),ot=x(nt);z(ot,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var lt=f(ot,2);r(lt),w(nt);var ct=f(nt,2),dt=t=>{var e=P(),a=x(e,!0);w(e),o(t=>k(a,t),[()=>(h(T),h(S),g(()=>T(S.searchLoading)))]),d(t,e)},pt=t=>{var e=y(),r=n(e),s=t=>{var e=A(),r=n(e);I(r,1,()=>(l(J),g(()=>l(J).slice(0,5))),L,(t,e)=>{var r=V(),s=x(r),i=x(s);E(i,()=>(l(e),g(()=>l(e).meta.title)));var n=f(i,2);z(n,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),w(s);var p=f(s,2),m=t=>{var a=D(),r=x(a),s=x(r,!0);w(r);var i=f(r,2),n=x(i);E(n,()=>(l(e),g(()=>l(e).excerpt))),w(i),w(a),o(t=>k(s,t),[()=>(h(T),h(S),g(()=>T(S.searchSummary)))]),d(t,a)};j(p,t=>{l(e),g(()=>l(e).excerpt.includes("<mark>"))&&t(m)});var v=f(p,2),u=t=>{var a=R(),r=x(a),s=x(r,!0);w(r);var i=f(r,2),n=x(i);E(n,()=>(l(e),g(()=>l(e).content))),w(i),w(a),o(t=>k(s,t),[()=>(h(T),h(S),g(()=>T(S.searchContent)))]),d(t,a)};j(v,t=>{l(e),g(()=>l(e).content&&l(e).content.includes("<mark>"))&&t(u)}),w(r),o(()=>a(r,"href",(l(e),g(()=>l(e).url)))),c("click",r,t=>X(t,l(e).url)),d(t,r)});var s=f(r,2),i=t=>{var e=q(),r=x(e),s=x(r),i=f(s);z(i,{icon:"fa6-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),w(r),w(e),o((t,r)=>{a(e,"href",t),k(s,`${r??""} `)},[()=>(h(_),l(U),l($),g(()=>_(l(U)||l($)))),()=>(h(T),h(S),l(J),g(()=>T(S.searchViewMore).replace("{count}",(l(J).length-5).toString())))]),c("click",e,t=>X(t,_(l(U)||l($)))),d(t,e)};j(s,t=>{l(J),g(()=>l(J).length>5)&&t(i)}),d(t,e)},i=t=>{var e=y(),a=n(e),r=t=>{var e=F(),a=x(e,!0);w(e),o(t=>k(a,t),[()=>(h(T),h(S),g(()=>T(S.searchNoResults)))]),d(t,e)},s=t=>{var e=y(),a=n(e),r=t=>{var e=G(),a=x(e,!0);w(e),o(t=>k(a,t),[()=>(h(T),h(S),g(()=>T(S.searchTypeSomething)))]),d(t,e)};j(a,t=>{(l(U)||l($))&&t(r)},!0),d(t,e)};j(a,t=>{l(J),g(()=>0===l(J).length)?t(r):t(s,!1)},!0),d(t,e)};j(r,t=>{l(J),g(()=>l(J).length>0)?t(s):t(i,!1)},!0),d(t,e)};j(ct,t=>{l(K)?t(dt):t(pt,!1)}),w(it),o((t,e)=>{a(at,"placeholder",t),a(lt,"placeholder",e)},[()=>(h(T),h(S),g(()=>T(S.search))),()=>(h(T),h(S),g(()=>T(S.search)))]),B(at,()=>l(U),t=>v(U,t)),c("focus",at,()=>Y(l(U),!0)),c("click",rt,()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")}),B(lt,()=>l($),t=>v($,t)),d(u,Z),p()}export{M as default};
