import{p as t,o as a,i as e,s}from"./props.BUlVg9lA.js";import{a as r,p as i,b as o,s as l,h as n,g as d,r as v,m as p,i as u,c,u as g,t as m,d as h}from"./utils.CJQZrHOt.js";import{s as f}from"./render.BA07FGsC.js";import{e as w,i as x}from"./each.BwLlVelT.js";import{I as b}from"./zh_TW.CljpqaUS.js";import{i as y}from"./translation.B4-sNpGr.js";import{g as j}from"./url-utils.CSd8bj7p.js";import"./navBarConfig.BmtWP5W4.js";var A=n('<a class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5\n                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]\n                       outline outline-4 z-50\n                       outline-[var(--card-bg)]\n                       group-hover:outline-[var(--btn-plain-bg-hover)]\n                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold\n                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]\n                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition\n                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>'),S=n('<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto\n                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>'),$=n('<div class="card-base px-8 py-6"></div>');function k(n,k){o(k,!1);let z=t(k,"tags",28,()=>[]),C=t(k,"categories",28,()=>[]),I=t(k,"sortedPosts",24,()=>[]);const T=new URLSearchParams(window.location.search);z(T.has("tag")?T.getAll("tag"):[]),C(T.has("category")?T.getAll("category"):[]);const _=T.get("uncategorized");let D=p([]);a(async()=>{let t=I();z().length>0&&(t=t.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(t=>z().includes(t)))),C().length>0&&(t=t.filter(t=>t.data.category&&C().includes(t.data.category))),_&&(t=t.filter(t=>!t.data.category)),t=t.slice().sort((t,a)=>a.data.published.getTime()-t.data.published.getTime());const a=t.reduce((t,a)=>{const e=a.data.published.getFullYear();return t[e]||(t[e]=[]),t[e].push(a),t},{}),e=Object.keys(a).map(t=>({year:Number.parseInt(t,10),posts:a[Number.parseInt(t,10)]}));e.sort((t,a)=>a.year-t.year),l(D,e)}),e();var F=$();w(F,5,()=>d(D),x,(t,a)=>{var e=S(),i=u(e),o=u(i),l=u(o,!0);v(o);var n=c(o,4),p=u(n);v(n),v(i);var $=c(i,2);w($,1,()=>(d(a),g(()=>d(a).posts)),x,(t,a)=>{var e=A(),i=u(e),o=u(i),l=u(o,!0);v(o);var n=c(o,4),p=u(n,!0);v(n);var w=c(n,2),x=u(w,!0);v(w),v(i),v(e),m((t,r,i)=>{s(e,"href",t),s(e,"aria-label",(d(a),g(()=>d(a).data.title))),f(l,r),f(p,(d(a),g(()=>d(a).data.title))),f(x,i)},[()=>(h(j),d(a),g(()=>j(d(a).id))),()=>(d(a),g(()=>{return`${((t=d(a).data.published).getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;var t})),()=>(d(a),g(()=>d(a).data.tags.map(t=>`#${t}`).join(" ")))]),r(t,e)}),v(e),m(t=>{f(l,(d(a),g(()=>d(a).year))),f(p,`${d(a),g(()=>d(a).posts.length)??""} ${t??""}`)},[()=>(h(y),d(a),h(b),g(()=>y(1===d(a).posts.length?b.postCount:b.postsCount)))]),r(t,e)}),v(F),r(n,F),i()}export{k as default};
