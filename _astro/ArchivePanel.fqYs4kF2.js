import{p as t,o as a,s as e,i as s}from"./translation.ImQVUNOD.js";import{i as r}from"./lifecycle.CWGh8ZU1.js";import{a as i,p as l,b as o,s as n,i as d,g as c,r as u,m as v,j as p,c as g,u as h,t as m,d as f,h as w}from"./render.BkHS84Qu.js";import{e as x,i as b}from"./each.DJo7uDcb.js";import{I as y}from"./zh_TW.DUjyqjc_.js";import{g as j}from"./url-utils.BgRX8D30.js";var z=d('<a class="group btn-plain block! h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5\n                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-(--primary)\n                       outline outline-4 z-50\n                       outline-(--card-bg)\n                       group-hover:outline-(--btn-plain-bg-hover)\n                       group-active:outline-(--btn-plain-bg-active)"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold\n                     group-hover:translate-x-1 transition-all group-hover:text-(--primary)\n                     text-75 pr-8 whitespace-nowrap text-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition\n                     whitespace-nowrap text-ellipsis overflow-hidden text-30"> </div></div></a>'),S=d('<div><div class="flex flex-row w-full items-center h-15"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-(--primary) mx-auto\n                  -outline-offset-2 z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>'),$=d('<div class="card-base px-8 py-6"></div>');function k(d,k){o(k,!1);let A=t(k,"tags",28,()=>[]),C=t(k,"categories",28,()=>[]),I=t(k,"sortedPosts",24,()=>[]);const T=new URLSearchParams(window.location.search);A(T.has("tag")?T.getAll("tag"):[]),C(T.has("category")?T.getAll("category"):[]);const _=T.get("uncategorized");let N=v([]);a(async()=>{let t=I();A().length>0&&(t=t.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(t=>A().includes(t)))),C().length>0&&(t=t.filter(t=>t.data.category&&C().includes(t.data.category))),_&&(t=t.filter(t=>!t.data.category)),t=t.slice().sort((t,a)=>a.data.published.getTime()-t.data.published.getTime());const a=t.reduce((t,a)=>{const e=a.data.published.getFullYear();return t[e]||(t[e]=[]),t[e].push(a),t},{}),e=Object.keys(a).map(t=>({year:Number.parseInt(t,10),posts:a[Number.parseInt(t,10)]}));e.sort((t,a)=>a.year-t.year),n(N,e)}),r();var P=$();x(P,5,()=>c(N),b,(t,a)=>{var r=S(),l=p(r),o=p(l),n=p(o,!0);u(o);var d=g(o,4),v=p(d);u(d),u(l);var $=g(l,2);x($,1,()=>(c(a),h(()=>c(a).posts)),b,(t,a)=>{var s=z(),r=p(s),l=p(r),o=p(l,!0);u(l);var n=g(l,4),d=p(n,!0);u(n);var v=g(n,2),x=p(v,!0);u(v),u(r),u(s),m((t,r,i)=>{e(s,"href",t),e(s,"aria-label",(c(a),h(()=>c(a).data.title))),w(o,r),w(d,(c(a),h(()=>c(a).data.title))),w(x,i)},[()=>(f(j),c(a),h(()=>j(c(a).id))),()=>(c(a),h(()=>{return`${((t=c(a).data.published).getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`;var t})),()=>(c(a),h(()=>c(a).data.tags.map(t=>`#${t}`).join(" ")))]),i(t,s)}),u(r),m(t=>{w(n,(c(a),h(()=>c(a).year))),w(v,`${c(a),h(()=>c(a).posts.length)??""} ${t??""}`)},[()=>(f(s),c(a),f(y),h(()=>s(1===c(a).posts.length?y.postCount:y.postsCount)))]),i(t,r)}),u(P),i(d,P),l()}export{k as default};
