import{K as e,C as n,z as t,I as a,L as o,D as s,g as f,F as r,H as l,G as u,J as i,M as d,N as p,O as v,P as g,A as c,Q as h,R as x,S as m,T as w,U as S,V as k,W as z,X as b,m as _,Y as y,Z as C,_ as M,$ as N,a0 as T,a1 as j,a2 as A,a3 as D,a4 as F,a5 as G,a6 as H}from"./utils.CJQZrHOt.js";function I(e,n){return n}function J(e,n=!0){for(var t=0;t<e.length;t++)A(e[t],n)}var K;function L(z,b,_,y,C,A=null){var D=z,I=new Map;if(0!==(b&F)){var L=z;D=t?a(o(L)):L.appendChild(e())}t&&s();var R,U=null,V=w(()=>{var e=_();return S(e)?e:null==e?[]:k(e)}),W=!0;function X(){Z.fallback=U,function(e,n,t,a,o){var s,f,r,l,u,i=0!==(a&H),d=n.length,p=e.items,v=e.effect.first,g=null,c=[],x=[];if(i)for(u=0;u<d;u+=1)r=o(n[u],u),0===((l=p.get(r).e).f&h)&&(l.nodes?.a?.measure(),(f??=new Set).add(l));for(u=0;u<d;u+=1){if(r=o(n[u],u),l=p.get(r).e,null!==e.outrogroups)for(const n of e.outrogroups)n.pending.delete(l),n.done.delete(l);if(0!==(l.f&h)){if(l.f^=h,l!==v){var m=g?g.next:v;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),Q(e,g,l),Q(e,l,m),P(l,m,t),c=[],x=[],v=(g=l).next;continue}P(l,null,t)}if(0!==(l.f&T)&&(M(l),i&&(l.nodes?.a?.unfix(),(f??=new Set).delete(l))),l!==v){if(void 0!==s&&s.has(l)){if(c.length<x.length){var w,S=x[0];g=S.prev;var z=c[0],b=c[c.length-1];for(w=0;w<c.length;w+=1)P(c[w],S,t);for(w=0;w<x.length;w+=1)s.delete(x[w]);Q(e,z.prev,b.next),Q(e,g,z),Q(e,b,S),v=S,g=b,u-=1,c=[],x=[]}else s.delete(l),P(l,v,t),Q(e,l.prev,l.next),Q(e,l,null===g?e.effect.first:g.next),Q(e,g,l),g=l;continue}for(c=[],x=[];null!==v&&v!==l;)(s??=new Set).add(v),x.push(v),v=v.next;if(null===v)continue}0===(l.f&h)&&c.push(l),g=l,v=l.next}if(null!==e.outrogroups){for(const n of e.outrogroups)0===n.pending.size&&(J(k(n.done)),e.outrogroups?.delete(n));0===e.outrogroups.size&&(e.outrogroups=null)}if(null!==v||void 0!==s){var _=[];if(void 0!==s)for(l of s)0===(l.f&T)&&_.push(l);for(;null!==v;)0===(v.f&T)&&v!==e.fallback&&_.push(v),v=v.next;var y=_.length;if(y>0){var C=0!==(a&F)&&0===d?t:null;if(i){for(u=0;u<y;u+=1)_[u].nodes?.a?.measure();for(u=0;u<y;u+=1)_[u].nodes?.a?.fix()}!function(e,n,t){for(var a,o=n.length,s=n.length,f=0;f<o;f++){let t=n[f];N(t,()=>{if(a){if(a.pending.delete(t),a.done.add(t),0===a.pending.size){var n=e.outrogroups;J(k(a.done)),n.delete(a),0===n.size&&(e.outrogroups=null)}}else s-=1},!1)}if(0===s){var r=null!==t;if(r){var l=t,u=l.parentNode;j(u),u.append(l),e.items.clear()}J(n,!r)}else a={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(a)}(e,_,C)}}i&&G(()=>{if(void 0!==f)for(l of f)l.nodes?.a?.apply()})}(Z,R,D,b,y),null!==U&&(0===R.length?0===(U.f&h)?M(U):(U.f^=h,P(U,null,D)):N(U,()=>{U=null}))}var Y=n(()=>{var n=(R=f(V)).length;let o=!1;t&&(r(D)===l!==(0===n)&&(D=u(),a(D),i(!1),o=!0));for(var s=new Set,w=c,S=m(),k=0;k<n;k+=1){t&&d.nodeType===p&&d.data===v&&(D=d,o=!0,i(!1));var z=R[k],M=y(z,k),N=W?null:I.get(M);N?(N.v&&g(N.v,z),N.i&&g(N.i,k),S&&w.skipped_effects.delete(N.e)):(N=O(I,W?D:K??=e(),z,M,k,C,b,_),W||(N.e.f|=h),I.set(M,N)),s.add(M)}if(0===n&&A&&!U&&(W?U=x(()=>A(D)):(U=x(()=>A(K??=e()))).f|=h),t&&n>0&&a(u()),!W)if(S){for(const[e,n]of I)s.has(e)||w.skipped_effects.add(n.e);w.oncommit(X),w.ondiscard(()=>{})}else X();o&&i(!0),f(V)}),Z={effect:Y,items:I,outrogroups:null,fallback:U};W=!1,t&&(D=d)}function O(e,n,t,a,o,s,f,r){var l=0!==(f&z)?0===(f&b)?_(t,!1,!1):y(t):null,u=0!==(f&C)?y(o):null;return{v:l,i:u,e:x(()=>(s(n,l??t,u??o,r),()=>{e.delete(a)}))}}function P(e,n,t){if(e.nodes)for(var a=e.nodes.start,o=e.nodes.end,s=n&&0===(n.f&h)?n.nodes.start:t;null!==a;){var f=D(a);if(s.before(a),a===o)return;a=f}}function Q(e,n,t){null===n?e.effect.first=t:n.next=t,null===t?e.effect.last=n:t.prev=n}export{L as e,I as i};
