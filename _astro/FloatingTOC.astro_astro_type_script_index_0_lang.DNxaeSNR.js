import{i as t,T as n}from"./tocUtils.o3UDKEip.js";const e=document.querySelector(".floating-toc-wrapper"),i="true"===e?.getAttribute("data-is-sidebar-toc-enabled");function o(){const t=window.FloatingTOC.panel;t&&!t.classList.contains("hide")&&(t.classList.add("hide"),t.classList.remove("show"))}function a(){const t=window.FloatingTOC.btn;t&&(!function(){if(!window.FloatingTOC.isPostPage())return!1;const t=document.querySelector(".floating-toc-wrapper"),n=t?.getAttribute("data-sidebar-position")||"left",e="true"===t?.getAttribute("data-show-right-sidebar-on-post");if("both"===n||"left"===n&&e)return window.innerWidth<1280||!i;return!0}()?(t.classList.add("hide"),o()):t.classList.remove("hide"))}async function d(){if(window.FloatingTOC.btn=document.getElementById("floating-toc-btn"),window.FloatingTOC.panel=document.getElementById("floating-toc-panel"),window.FloatingTOC.btn&&window.FloatingTOC.panel){a();try{window.FloatingTOC.manager&&window.FloatingTOC.manager.cleanup(),window.FloatingTOC.manager=new n({contentId:"floating-toc-content",indicatorId:"floating-active-indicator",maxLevel:3,scrollOffset:80}),window.FloatingTOC.manager.init();const t=document.getElementById("floating-toc-content");t&&t.addEventListener("click",t=>{const n=t.target,e=n?.closest('a[href^="#"]');e&&(window.tocInternalNavigation=!0)},{capture:!0}),function(){window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o),window.addEventListener("popstate",o),document.addEventListener("visibilitychange",()=>{document.hidden&&o()}),document.addEventListener("astro:page-load",o),document.addEventListener("astro:before-preparation",o),window.addEventListener("hashchange",()=>{window.tocInternalNavigation||o(),window.tocInternalNavigation=!1}),document.addEventListener("click",t=>{const n=t.target,e=n?.closest("a");if(!e||!e.href)return;const i=e.getAttribute("href");if(i&&!i.startsWith("#")&&!i.startsWith("javascript:")&&!window.tocInternalNavigation){const t=document.getElementById("floating-toc-panel");t&&t.contains(e)||o()}});const t=history.pushState,n=history.replaceState;history.pushState=function(...n){return o(),t.apply(this,n)},history.replaceState=function(...t){return o(),n.apply(this,t)}}()}catch(t){console.error("Failed to load TOCManager:",t)}}}if(void 0===window.FloatingTOC&&(window.FloatingTOC={btn:null,panel:null,manager:null,isPostPage:t}),window.toggleFloatingTOC=function(){const t=window.FloatingTOC.panel;if(!t)return;t.classList.contains("hide")?(t.classList.remove("hide"),t.classList.add("show")):(t.classList.remove("show"),t.classList.add("hide"))},d(),"undefined"!=typeof window&&!window.floatingTOCListenersInitialized){let t;window.floatingTOCListenersInitialized=!0,document.addEventListener("swup:contentReplaced",()=>{setTimeout(d,100)}),document.addEventListener("astro:page-load",()=>{setTimeout(d,100)}),window.addEventListener("popstate",()=>{setTimeout(d,200)}),window.addEventListener("layoutChange",()=>{a()}),window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{a()},300)})}
