import{o as t,s as e,r as a,i as s}from"./translation.DsOJoF3k.js";import{i}from"./lifecycle.DE6d2uh4.js";import{ad as r,ae as n,f as o,t as l,g as c,e as d,a as p,p as m,b as h,s as v,c as f,d as g,h as u,u as b,j as x,m as w,r as y,i as k,k as j}from"./render.BDQaTL4F.js";import{I,i as L,h as z}from"./Icon.C8wzWH14.js";import{e as E,i as S}from"./each.D4uyC2F2.js";import{b as B}from"./input.D3XAJwR3.js";import{I as T}from"./zh_TW.BMbNBumh.js";import{u as W,a as _}from"./url-utils.DFgQgLXL.js";/* empty css                        */import"./branches.CoZ2ZYLY.js";function P(t,e){window.location.href=t}var R=x('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),V=x('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),A=x('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),C=x('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block\n           rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active)"><div class="transition text-90 inline-flex font-bold group-hover:text-(--primary)"><!> <!></div> <!> <!></a>'),D=x('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active) text-(--primary) font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),M=x("<!> <!>",1),N=x('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),U=x('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),$=x('<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg\n      bg-black/4 hover:bg-black/6 focus-within:bg-black/6\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0\n         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:hidden! rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-120\ntop-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl\n      bg-black/4 hover:bg-black/6 focus-within:bg-black/6\n      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10\n  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0\n               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>',1);function q(x,q){h(q,!1);let F,G=w(""),H=w(""),J=w([]),K=w(!1),O=w(!1);W("/"),W("/");const Q=(t,e)=>{const a=document.getElementById("search-panel");!a||e&&!c(G)||!e&&!c(H)||(t?a.classList.remove("float-panel-closed"):a.classList.add("float-panel-closed"))},X=(t,e)=>{t.preventDefault(),document.getElementById("search-panel")?.classList.add("float-panel-closed"),v(G,""),v(H,""),v(J,[]),function(t,e){if(t&&"string"==typeof t)if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//"))window.open(t,"_blank");else{if(t.startsWith("#")){const e=document.getElementById(t.slice(1));return void(e&&e.scrollIntoView({behavior:"smooth"}))}if("undefined"!=typeof window&&window.swup)try{e?.replace||window.swup.navigate(t)}catch(a){console.error("Swup navigation failed:",a),P(t)}else P(t)}else console.warn("navigateToPage: Invalid URL provided")}(e)},Y=async(t,e)=>{if(!t)return Q(!1,e),void v(J,[]);c(O)&&(v(K,!0),clearTimeout(F),F=setTimeout(async()=>{try{let a=[];if(window.pagefind){const e=await window.pagefind.search(t);a=await Promise.all(e.results.map(t=>t.data()))}else 0;v(J,a),Q(!0,e)}catch(a){console.error("Search error:",a),v(J,[]),Q(!1,e)}finally{v(K,!1)}},300))};t(()=>{const t=()=>{v(O,!0),c(G)&&Y(c(G),!0),c(H)&&Y(c(H),!1)};window.pagefind?t():(document.addEventListener("pagefindready",t,{once:!0}),document.addEventListener("pagefindloaderror",t,{once:!0}))}),r(()=>(c(O),c(G)),()=>{c(O)&&(c(G)||""===c(G))&&Y(c(G),!0)}),r(()=>(c(O),c(H)),()=>{c(O)&&(c(H)||""===c(H))&&Y(c(H),!1)}),n(),i();var Z=$(),tt=o(Z),et=f(tt);I(et,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var at=g(et,2);a(at),y(tt);var st=g(tt,2),it=f(st);I(it,{icon:"material-symbols:search",class:"text-[1.25rem]"}),y(st);var rt=g(st,2),nt=f(rt),ot=f(nt);I(ot,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var lt=g(ot,2);a(lt),y(nt);var ct=g(nt,2),dt=t=>{var e=R(),a=f(e,!0);y(e),l(t=>k(a,t),[()=>(u(s),u(T),b(()=>s(T.searchLoading)))]),p(t,e)},pt=t=>{var a=j(),i=o(a),r=t=>{var a=M(),i=o(a);E(i,1,()=>(c(J),b(()=>c(J).slice(0,5))),S,(t,a)=>{var i=C(),r=f(i),n=f(r);z(n,()=>(c(a),b(()=>c(a).meta.title)));var o=g(n,2);I(o,{icon:"fa7-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-(--primary)"}),y(r);var m=g(r,2),h=t=>{var e=V(),i=f(e),r=f(i,!0);y(i);var n=g(i,2),o=f(n);z(o,()=>(c(a),b(()=>c(a).excerpt))),y(n),y(e),l(t=>k(r,t),[()=>(u(s),u(T),b(()=>s(T.searchSummary)))]),p(t,e)};L(m,t=>{c(a),b(()=>c(a).excerpt.includes("<mark>"))&&t(h)});var v=g(m,2),x=t=>{var e=A(),i=f(e),r=f(i,!0);y(i);var n=g(i,2),o=f(n);z(o,()=>(c(a),b(()=>c(a).content))),y(n),y(e),l(t=>k(r,t),[()=>(u(s),u(T),b(()=>s(T.searchContent)))]),p(t,e)};L(v,t=>{c(a),b(()=>c(a).content&&c(a).content.includes("<mark>"))&&t(x)}),y(i),l(()=>e(i,"href",(c(a),b(()=>c(a).url)))),d("click",i,t=>X(t,c(a).url)),p(t,i)});var r=g(i,2),n=t=>{var a=D(),i=f(a),r=f(i),n=g(r);I(n,{icon:"fa7-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),y(i),y(a),l((t,s)=>{e(a,"href",t),k(r,`${s??""} `)},[()=>(u(_),c(G),c(H),b(()=>_(c(G)||c(H)))),()=>(u(s),u(T),c(J),b(()=>s(T.searchViewMore).replace("{count}",(c(J).length-5).toString())))]),d("click",a,t=>X(t,_(c(G)||c(H)))),p(t,a)};L(r,t=>{c(J),b(()=>c(J).length>5)&&t(n)}),p(t,a)},n=t=>{var e=j(),a=o(e),i=t=>{var e=N(),a=f(e,!0);y(e),l(t=>k(a,t),[()=>(u(s),u(T),b(()=>s(T.searchNoResults)))]),p(t,e)},r=t=>{var e=j(),a=o(e),i=t=>{var e=U(),a=f(e,!0);y(e),l(t=>k(a,t),[()=>(u(s),u(T),b(()=>s(T.searchTypeSomething)))]),p(t,e)};L(a,t=>{(c(G)||c(H))&&t(i)},!0),p(t,e)};L(a,t=>{c(J),b(()=>0===c(J).length)?t(i):t(r,!1)},!0),p(t,e)};L(i,t=>{c(J),b(()=>c(J).length>0)?t(r):t(n,!1)},!0),p(t,a)};L(ct,t=>{c(K)?t(dt):t(pt,!1)}),y(rt),l((t,a)=>{e(at,"placeholder",t),e(lt,"placeholder",a)},[()=>(u(s),u(T),b(()=>s(T.search))),()=>(u(s),u(T),b(()=>s(T.search)))]),B(at,()=>c(G),t=>v(G,t)),d("focus",at,()=>Y(c(G),!0)),d("click",st,()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")}),B(lt,()=>c(H),t=>v(H,t)),p(x,Z),m()}export{q as default};
